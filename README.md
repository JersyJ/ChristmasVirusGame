# Christmas Virus Game

This repository contains a project that combines a simple Christmas-themed game with a hidden twist. While the game, written in Python, offers a basic holiday distraction (nothing too festive, really :D), it also runs a background process which contains virus. This process encrypts files and sends data to a server. The server, built with FastAPI and SQLAlchemy, manages tasks like storing device information, encryption keys, status submissions, and basic file handling.
## Game Description

The game simulates ransomware targeting specific file types (`.txt`, `.docx`, `.pdf`, `.tmp`, `.log`). It uses a biologically inspired algorithm, specifically a genetic algorithm, to select the best subset of files for encryption based on their importance. The importance is determined by various criteria such as:

- File type  
- Size  
- Last modification date  
- Keywords in the file name  
- File location

More details about the game can be found in the `game/README.md` file.

## Server Functionality

To accelerate development, the `rafsaf/minimal-fastapi-postgres-template` was used. This template provides a FastAPI server integrated with a PostgreSQL database, Alembic migrations, Pydantic schemas and Dockerfile.

- Database schema: SQLAlchemy models `Device`, `DeviceStatus`, `File`, for database tables, defined in `app/models.py` and then the schema is auto generated by Alembic migrations.

- Schemas: Pydantic models for request and response validation, defined in `app/schemas/requests.py` and `app/schemas/responses.py`

- API endpoints: FastAPI routers for handling requests, defined in `app/api/endpoints/devices.py`

- For simplicity in testing, authentication is currently disabled by commenting out sections in `app/api/endpoints/devices.py`.

The server provides several endpoints to manage devices and their statuses:

### Device Creation
- **Endpoint**: `POST /devices`  
- **Description**: Creates and saves a new device.  
- **Request**: `DeviceCreateRequest`  
- **Response**: `DeviceCreateResponse`  

### Submit Device Status
- **Endpoint**: `POST /devices/submit`  
- **Description**: Submits the status of a device along with an optional file.  
- **Request**: `DeviceSubmitRequest`  
- **Response**: `DeviceSubmitResponse`  

### Get Device by UUID
- **Endpoint**: `GET /devices/{device_uuid}`  
- **Description**: Retrieves an existing device by its UUID.  
- **Response**: `DeviceResponse`  

### Get All Devices
- **Endpoint**: `GET /devices`  
- **Description**: Retrieves all existing devices.  
- **Response**: List of `DeviceResponse`  

### Get All Statuses of a Device
- **Endpoint**: `GET /devices/{device_id}/status`  
- **Description**: Retrieves all statuses of a device by its ID.  
- **Response**: `DeviceWithStatusResponse`  

### Get All Files of a Device
- **Endpoint**: `GET /devices/{device_id}/files`  
- **Description**: Retrieves all files of a device by its ID.  
- **Response**: `DeviceFilesResponse`  

How to run/develop the server is described in the `server/README.md` file.

This project showcases the integration of virus infected game with a backend server, offering a complete example of how a game with a simulated virus can interact with a server for payload transmission and data management.
